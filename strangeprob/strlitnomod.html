<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN">
<!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. -->
<!-- Content from the book "C Programming FAQs: Frequently Asked Questions" -->
<!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by -->
<!-- permission of the author and the publisher as a service to the community. -->
<!-- It is intended to complement the use of the published text -->
<!-- and is protected by international copyright laws. -->
<!-- The on-line content may be accessed freely for personal use -->
<!-- but may not be published or retransmitted without explicit permission. -->
<!-- -->
<!-- this page built Sat Dec 24 21:47:46 2005 by faqproc version 2.7 -->
<!-- from source file strangeprob.sgml dated Tue Jun 29 21:44:40 2004 -->
<!-- corresponding to FAQ list version 4.0 -->
<html>
<head>
<meta name=GENERATOR content="faqproc">


<title>Question 16.6</title>
<link href="funnybugs.html" rev=precedes>
<link href="ptralign.html" rel=precedes>
<link href="index.html" rev=subdocument>
</head>
<body bgcolor="#ffffff">
<a href="funnybugs.html" rev=precedes><img src="../images/buttonleft.gif" alt="prev"></a>
<a href="index.html" rev=subdocument><img src="../images/buttonup.gif" alt="up"></a>
<a href="ptralign.html" rel=precedes><img src="../images/buttonright.gif" alt="next"></a>
&nbsp;
<a href="../index.html"><img src="../images/buttontop.gif" alt="top/contents"></a>
<a href="../search.html"><img src="../images/buttonsrch.gif" alt="search"></a>
<hr>
<p><!-- qbegin -->
<h1>
comp.lang.c FAQ list
<font color=blue>&middot;</font>
<!-- qtag -->Question 16.6
</h1>
<p>
<font face=Helvetica size=8 color=blue><b>Q:</b></font>
Why does
this code:
<pre>
char&nbsp;*p&nbsp;=&nbsp;"hello,&nbsp;world!";
p[0]&nbsp;=&nbsp;'H';</pre>

crash?
</p><p><hr>
<p>
<font face=Helvetica size=8 color=blue><b>A:</b></font>

String constants
are
in fact
constant.
The compiler may
place them in nonwritable storage,
and it is therefore not safe to modify
them.

When you need writable strings,
you must allocate writable memory for them,
either by declaring an array,
or by calling <TT>malloc</TT>.
Try
<pre>
	char a[] = "hello, world!";
</pre>
</p><p>By the same argument,
a typical invocation of the old Unix <TT>mktemp</TT> routine
<pre>
	char *tmpfile = mktemp("/tmp/tmpXXXXXX");
</pre>
is nonportable;
the proper usage is
<pre>
	char tmpfile[] = "/tmp/tmpXXXXXX";
	mktemp(tmpfile);
</pre>
</p><p>See also question <a href="../decl/strlitinit.html">1.32</a>.
</p>

<p>References:

ISO Sec. 6.1.4
<br>
H&amp;S Sec. 2.7.4 pp. 31-2
<br></p><!-- aend -->
<p>
<hr>
<a href="funnybugs.html" rev=precedes><img src="../images/buttonleft.gif" alt="prev"></a>
<a href="index.html" rev=subdocument><img src="../images/buttonup.gif" alt="up"></a>
<a href="ptralign.html" rel=precedes><img src="../images/buttonright.gif" alt="next"></a>
&nbsp;
<a href="../questions.html"><img src="../images/buttontop.gif" alt="contents"></a>
<a href="../search.html"><img src="../images/buttonsrch.gif" alt="search"></a>
<br><!-- lastfooter -->
<a href="../about.html">about this FAQ list</a>
&nbsp;
<a href="../eskimo.html">about eskimo</a>
&nbsp;
<a href="../search.html">search</a>
&nbsp;
<a href="../feedback.html">feedback</a>
&nbsp;
<a href="copyright.html">copyright</a>
<p>
Hosted by
<a href="http://www.eskimo.com/"><img src="http://www.eskimo.com/img/link/eskitiny.gif" alt="Eskimo North"></a>
</body>
</html>
