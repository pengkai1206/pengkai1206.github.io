<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN">
<!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. -->
<!-- Content from the book "C Programming FAQs: Frequently Asked Questions" -->
<!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by -->
<!-- permission of the author and the publisher as a service to the community. -->
<!-- It is intended to complement the use of the published text -->
<!-- and is protected by international copyright laws. -->
<!-- The on-line content may be accessed freely for personal use -->
<!-- but may not be published or retransmitted without explicit permission. -->
<!-- -->
<!-- this page built Sat Dec 24 21:47:45 2005 by faqproc version 2.7 -->
<!-- from source file malloc.sgml dated Wed Dec 21 13:50:44 2005 -->
<!-- corresponding to FAQ list version 4.0 -->
<html>
<head>
<meta name=GENERATOR content="faqproc">
<title>Question 7.21</title>
<link href="useafterfree.html" rev=precedes>
<link href="local.html" rel=precedes>
<link href="index.html" rev=subdocument>
</head>
<body bgcolor="#ffffff">
<a href="useafterfree.html" rev=precedes><img src="../images/buttonleft.gif" alt="prev"></a>
<a href="index.html" rev=subdocument><img src="../images/buttonup.gif" alt="up"></a>
<a href="local.html" rel=precedes><img src="../images/buttonright.gif" alt="next"></a>
&nbsp;
<a href="../index.html"><img src="../images/buttontop.gif" alt="top/contents"></a>
<a href="../search.html"><img src="../images/buttonsrch.gif" alt="search"></a>
<hr>
<p><!-- qbegin -->
<h1>
comp.lang.c FAQ list
<font color=blue>&middot;</font>
<!-- qtag -->Question 7.21
</h1>
<p>
<font face=Helvetica size=8 color=blue><b>Q:</b></font>
Why isn't a pointer
null
after calling
<TT>free</TT>?

<br>
How unsafe is it to use
(assign, compare)
a pointer value after it's been freed?
</p><p><hr>
<p>
<font face=Helvetica size=8 color=blue><b>A:</b></font>
When you call <TT>free</TT>,
the memory pointed to by the passed pointer is freed,
but the value of the pointer in the caller
probably
remains unchanged,
because
C's pass-by-value

semantics
mean that called functions
never permanently
change the values of their arguments.
(See also question <a href="../ptrs/passptrinit.html">4.8</a>.)
</p><p>A pointer
value
which has been freed is, strictly speaking, invalid,

and <em>any</em> use of it,
even if it is not dereferenced
(i.e. even if
the use of it is a
seemingly innocuous
assignment or comparison),
can theoretically lead to trouble.
(We
can probably assume that
as a quality of implementation issue,
most implementations will
not go out of their way
to generate exceptions
for innocuous uses of invalid
pointers,
but the Standard is clear
in saying that
nothing is guaranteed,
and




there are system architectures
for which
such
exceptions
would be quite natural.)
</p><p>When pointer variables
(or fields within structures)
are repeatedly allocated and freed within a program,
it is often useful to set them to NULL

immediately after freeing
them,
to explicitly record their state.
</p>

<p>References:

ISO Sec. 7.10.3
<br>
Rationale Sec. 3.2.2.3
<br></p>
<!-- aend -->
<p>
<hr>
<a href="useafterfree.html" rev=precedes><img src="../images/buttonleft.gif" alt="prev"></a>
<a href="index.html" rev=subdocument><img src="../images/buttonup.gif" alt="up"></a>
<a href="local.html" rel=precedes><img src="../images/buttonright.gif" alt="next"></a>
&nbsp;
<a href="../questions.html"><img src="../images/buttontop.gif" alt="contents"></a>
<a href="../search.html"><img src="../images/buttonsrch.gif" alt="search"></a>
<br><!-- lastfooter -->
<a href="../about.html">about this FAQ list</a>
&nbsp;
<a href="../eskimo.html">about eskimo</a>
&nbsp;
<a href="../search.html">search</a>
&nbsp;
<a href="../feedback.html">feedback</a>
&nbsp;
<a href="copyright.html">copyright</a>
<p>
Hosted by
<a href="http://www.eskimo.com/"><img src="http://www.eskimo.com/img/link/eskitiny.gif" alt="Eskimo North"></a>
</body>
</html>
