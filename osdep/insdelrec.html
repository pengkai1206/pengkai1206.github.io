<!DOCTYPE HTML PUBLIC "-//W3O//DTD W3 HTML 2.0//EN">
<!-- This collection of hypertext pages is Copyright 1995-2005 by Steve Summit. -->
<!-- Content from the book "C Programming FAQs: Frequently Asked Questions" -->
<!-- (Addison-Wesley, 1995, ISBN 0-201-84519-9) is made available here by -->
<!-- permission of the author and the publisher as a service to the community. -->
<!-- It is intended to complement the use of the published text -->
<!-- and is protected by international copyright laws. -->
<!-- The on-line content may be accessed freely for personal use -->
<!-- but may not be published or retransmitted without explicit permission. -->
<!-- -->
<!-- this page built Sat Dec 24 21:47:47 2005 by faqproc version 2.7 -->
<!-- from source file osdepfile.sgml dated Sat Jun 26 20:52:13 2004 -->
<!-- corresponding to FAQ list version 4.0 -->
<html>
<head>
<meta name=GENERATOR content="faqproc">

<title>Question 19.14</title>
<link href="ftruncate.html" rev=precedes>
<link href="fdfilename.html" rel=precedes>
<link href="index.html" rev=subdocument>
</head>
<body bgcolor="#ffffff">
<a href="ftruncate.html" rev=precedes><img src="../images/buttonleft.gif" alt="prev"></a>
<a href="index.html" rev=subdocument><img src="../images/buttonup.gif" alt="up"></a>
<a href="fdfilename.html" rel=precedes><img src="../images/buttonright.gif" alt="next"></a>
&nbsp;
<a href="../index.html"><img src="../images/buttontop.gif" alt="top/contents"></a>
<a href="../search.html"><img src="../images/buttonsrch.gif" alt="search"></a>
<hr>
<p><!-- qbegin -->
<h1>
comp.lang.c FAQ list
<font color=blue>&middot;</font>
<!-- qtag -->Question 19.14
</h1>
<p>
<font face=Helvetica size=8 color=blue><b>Q:</b></font>
How can I insert or delete a line
(or record)
in the middle of a file?
</p><p><hr>
<p>
<font face=Helvetica size=8 color=blue><b>A:</b></font>
In general, there is no way to
do this.
<a href="nonseq.html" rel=subdocument>[footnote]</a>
The usual solution is simply to rewrite the file.
</p><p>When you find yourself needing to insert data
into an existing file,
here are a few alternatives you can try:

</p><UL><li>Rearrange the data file so that you can append the new 
information at the end.
<li>Put the information in a second file.

<li>Leave some blank space
(e.g. a line of 80 spaces,
or a field like <TT>0000000000</TT>)
in the file when it is first written,
and overwrite it
later
with the final
information
(see also question <a href="../stdio/fupdate.html">12.30</a>).

(This technique is most portable in binary mode;
on some systems,
overwriting a text file may truncate it.)
<li>Use a database

instead of a flat file.
</UL><p>Instead of actually deleting records,
you might consider
just marking them as deleted,
and having the code which reads the file ignore them.

(You could run a separate
coalescion
program once in a while
to rewrite the file,
finally
discarding
the deleted records.




Or,
if the records are all the same length,
you could take the last record
and use it to overwrite the record to be deleted,
then truncate the file.)
</p><p>See also questions
<a href="../stdio/fupdate.html">12.30</a>
and
<a href="ftruncate.html">19.13</a>.
</p><p>Additional links:
<a href="insertf.20000216.html">further reading</a>
</p><!-- aend -->
<p>
<hr>
<a href="ftruncate.html" rev=precedes><img src="../images/buttonleft.gif" alt="prev"></a>
<a href="index.html" rev=subdocument><img src="../images/buttonup.gif" alt="up"></a>
<a href="fdfilename.html" rel=precedes><img src="../images/buttonright.gif" alt="next"></a>
&nbsp;
<a href="../questions.html"><img src="../images/buttontop.gif" alt="contents"></a>
<a href="../search.html"><img src="../images/buttonsrch.gif" alt="search"></a>
<br><!-- lastfooter -->
<a href="../about.html">about this FAQ list</a>
&nbsp;
<a href="../eskimo.html">about eskimo</a>
&nbsp;
<a href="../search.html">search</a>
&nbsp;
<a href="../feedback.html">feedback</a>
&nbsp;
<a href="copyright.html">copyright</a>
<p>
Hosted by
<a href="http://www.eskimo.com/"><img src="http://www.eskimo.com/img/link/eskitiny.gif" alt="Eskimo North"></a>
</body>
</html>
